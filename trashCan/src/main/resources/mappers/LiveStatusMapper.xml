<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.chungrim.mapper.LiveStatusMapper">
  
  <!-- 매인 리스트 가져오기 -->
  <select id="mainList" resultType="liveVO">
  	SELECT
  		raspberrypi_ip as raspberrypiIp,
  		trash_amount as trashAmount,
  		place_name as placeName,
  		place_seq as placeSeq,
  		detail_name as detailName,
  		detail_seq as detailSeq,
  		floor_name as floorName,
  		floor_seq as floorSeq,
  		gender_name as genderName,
  		gender_num as genderNum
  	FROM
  		LIVE_STATUS_CHECK
  	JOIN
  		RASPBERRYPI ON LIVE_STATUS_CHECK.FK_RASPBERRYPI_IP = RASPBERRYPI.RASPBERRYPI_IP
  	JOIN
  		PLACE ON PLACE.PLACE_SEQ = RASPBERRYPI.FK_PLACE_SEQ
  	JOIN
  		DETAIL ON DETAIL.DETAIL_SEQ = RASPBERRYPI.FK_DETAIL_SEQ
  	JOIN
  		FLOOR ON FLOOR.FLOOR_SEQ = RASPBERRYPI.FK_FLOOR_SEQ
  	JOIN
  		GENDER ON GENDER.GENDER_NUM = RASPBERRYPI.FK_GENDER_NUM
  </select>
  
  <select id="selectOpt" resultType="liveVO">
  	SELECT DISTINCT
  		place_name as placeName,
  		place_seq as placeSeq
  	FROM
  		LIVE_STATUS_CHECK
  	JOIN
  		RASPBERRYPI ON LIVE_STATUS_CHECK.FK_RASPBERRYPI_IP = RASPBERRYPI.RASPBERRYPI_IP
  	JOIN
  		PLACE ON PLACE.PLACE_SEQ = RASPBERRYPI.FK_PLACE_SEQ
  </select>
  
  <select id="selectList" resultType="liveVO">
  	SELECT
  		raspberrypi_ip as raspberrypiIp,
  		trash_amount as trashAmount,
  		place_name as placeName,
  		place_seq as placeSeq,
  		detail_name as detailName,
  		detail_seq as detailSeq,
  		floor_name as floorName,
  		floor_seq as floorSeq,
  		gender_name as genderName,
  		gender_num as genderNum
  	FROM
  		LIVE_STATUS_CHECK
  	JOIN
  		RASPBERRYPI ON LIVE_STATUS_CHECK.FK_RASPBERRYPI_IP = RASPBERRYPI.RASPBERRYPI_IP
  	JOIN
  		PLACE ON PLACE.PLACE_SEQ = RASPBERRYPI.FK_PLACE_SEQ
  	JOIN
  		DETAIL ON DETAIL.DETAIL_SEQ = RASPBERRYPI.FK_DETAIL_SEQ
  	JOIN
  		FLOOR ON FLOOR.FLOOR_SEQ = RASPBERRYPI.FK_FLOOR_SEQ
  	JOIN
  		GENDER ON GENDER.GENDER_NUM = RASPBERRYPI.FK_GENDER_NUM
  	WHERE
  		place_seq = #{placeSeq}
  </select>
  
  <select id="selectOpt_detail" resultType="liveVO">
  	SELECT DISTINCT
  		detail_name as detailName,
  		detail_seq as detailSeq
  	FROM
  		LIVE_STATUS_CHECK
  	JOIN
  		RASPBERRYPI ON LIVE_STATUS_CHECK.FK_RASPBERRYPI_IP = RASPBERRYPI.RASPBERRYPI_IP
  	JOIN
  		PLACE ON PLACE.PLACE_SEQ = RASPBERRYPI.FK_PLACE_SEQ
  	JOIN
  		DETAIL ON DETAIL.DETAIL_SEQ = RASPBERRYPI.FK_DETAIL_SEQ
  	WHERE
  		place_seq = #{placeSeq}
  </select>
  
  <select id="selectList_detail" resultType="liveVO">
  	SELECT
  		raspberrypi_ip as raspberrypiIp,
  		trash_amount as trashAmount,
  		place_name as placeName,
  		place_seq as placeSeq,
  		detail_name as detailName,
  		detail_seq as detailSeq,
  		floor_name as floorName,
  		floor_seq as floorSeq,
  		gender_name as genderName,
  		gender_num as genderNum
  	FROM
  		LIVE_STATUS_CHECK
  	JOIN
  		RASPBERRYPI ON LIVE_STATUS_CHECK.FK_RASPBERRYPI_IP = RASPBERRYPI.RASPBERRYPI_IP
  	JOIN
  		PLACE ON PLACE.PLACE_SEQ = RASPBERRYPI.FK_PLACE_SEQ
  	JOIN
  		DETAIL ON DETAIL.DETAIL_SEQ = RASPBERRYPI.FK_DETAIL_SEQ
  	JOIN
  		FLOOR ON FLOOR.FLOOR_SEQ = RASPBERRYPI.FK_FLOOR_SEQ
  	JOIN
  		GENDER ON GENDER.GENDER_NUM = RASPBERRYPI.FK_GENDER_NUM
  	WHERE
  		detail_seq = #{detailSeq}
  </select>
  
  </mapper>